{"ast":null,"code":"import { ExtensionType, extensions } from '@pixi/extensions';\nimport { Transform, Matrix } from '@pixi/math';\nimport { RenderTexture } from './RenderTexture.mjs';\nconst tempTransform = new Transform();\nclass GenerateTextureSystem {\n  constructor(renderer) {\n    this.renderer = renderer;\n    this._tempMatrix = new Matrix();\n  }\n  generateTexture(displayObject, options) {\n    const {\n      region: manualRegion,\n      ...textureOptions\n    } = options || {};\n    const region = manualRegion || displayObject.getLocalBounds(null, true);\n    if (region.width === 0) region.width = 1;\n    if (region.height === 0) region.height = 1;\n    const renderTexture = RenderTexture.create({\n      width: region.width,\n      height: region.height,\n      ...textureOptions\n    });\n    this._tempMatrix.tx = -region.x;\n    this._tempMatrix.ty = -region.y;\n    const transform = displayObject.transform;\n    displayObject.transform = tempTransform;\n    this.renderer.render(displayObject, {\n      renderTexture,\n      transform: this._tempMatrix,\n      skipUpdateTransform: !!displayObject.parent,\n      blit: true\n    });\n    displayObject.transform = transform;\n    return renderTexture;\n  }\n  destroy() {}\n}\nGenerateTextureSystem.extension = {\n  type: [ExtensionType.RendererSystem, ExtensionType.CanvasRendererSystem],\n  name: \"textureGenerator\"\n};\nextensions.add(GenerateTextureSystem);\nexport { GenerateTextureSystem };","map":{"version":3,"names":["tempTransform","Transform","GenerateTextureSystem","constructor","renderer","_tempMatrix","Matrix","generateTexture","displayObject","options","region","manualRegion","textureOptions","getLocalBounds","width","height","renderTexture","RenderTexture","create","tx","x","ty","y","transform","render","skipUpdateTransform","parent","blit","destroy","extension","type","ExtensionType","RendererSystem","CanvasRendererSystem","name","extensions","add"],"sources":["C:\\Users\\cheng\\OneDrive\\Desktop\\site\\cindyjcheng.github.io\\node_modules\\@pixi\\core\\src\\renderTexture\\GenerateTextureSystem.ts"],"sourcesContent":["import { extensions, ExtensionType } from '@pixi/extensions';\nimport { Matrix, Transform } from '@pixi/math';\nimport { RenderTexture } from './RenderTexture';\n\nimport type { MSAA_QUALITY, SCALE_MODES } from '@pixi/constants';\nimport type { ExtensionMetadata } from '@pixi/extensions';\nimport type { Rectangle } from '@pixi/math';\nimport type { IRenderableContainer, IRenderableObject, IRenderer } from '../IRenderer';\nimport type { ISystem } from '../system/ISystem';\n\nconst tempTransform = new Transform();\n\n// TODO could this just be part of extract?\nexport interface IGenerateTextureOptions\n{\n    /** The scale mode of the texture. Optional, defaults to `PIXI.BaseTexture.defaultOptions.scaleMode`. */\n    scaleMode?: SCALE_MODES;\n    /** The resolution / device pixel ratio of the texture being generated. Optional defaults to Renderer resolution. */\n    resolution?: number;\n    /**\n     * The region of the displayObject, that shall be rendered,\n     * if no region is specified, defaults to the local bounds of the displayObject.\n     */\n    region?: Rectangle;\n    /** The number of samples of the frame buffer. */\n    multisample?: MSAA_QUALITY;\n}\n\n/**\n * System that manages the generation of textures from the renderer.\n * @memberof PIXI\n */\nexport class GenerateTextureSystem implements ISystem\n{\n    /** @ignore */\n    static extension: ExtensionMetadata = {\n        type: [\n            ExtensionType.RendererSystem,\n            ExtensionType.CanvasRendererSystem\n        ],\n        name: 'textureGenerator',\n    };\n\n    renderer: IRenderer;\n\n    private readonly _tempMatrix: Matrix;\n\n    constructor(renderer: IRenderer)\n    {\n        this.renderer = renderer;\n\n        this._tempMatrix = new Matrix();\n    }\n\n    /**\n     * A Useful function that returns a texture of the display object that can then be used to create sprites\n     * This can be quite useful if your displayObject is complicated and needs to be reused multiple times.\n     * @param displayObject - The displayObject the object will be generated from.\n     * @param {IGenerateTextureOptions} options - Generate texture options.\n     * @returns a shiny new texture of the display object passed in\n     */\n    generateTexture(displayObject: IRenderableObject, options?: IGenerateTextureOptions): RenderTexture\n    {\n        const { region: manualRegion, ...textureOptions } = options || {};\n\n        const region = manualRegion || (displayObject as IRenderableContainer).getLocalBounds(null, true);\n\n        // minimum texture size is 1x1, 0x0 will throw an error\n        if (region.width === 0) region.width = 1;\n        if (region.height === 0) region.height = 1;\n\n        const renderTexture = RenderTexture.create(\n            {\n                width: region.width,\n                height: region.height,\n                ...textureOptions,\n            });\n\n        this._tempMatrix.tx = -region.x;\n        this._tempMatrix.ty = -region.y;\n\n        const transform = displayObject.transform;\n\n        displayObject.transform = tempTransform;\n\n        this.renderer.render(displayObject, {\n            renderTexture,\n            transform: this._tempMatrix,\n            skipUpdateTransform: !!displayObject.parent,\n            blit: true,\n        });\n\n        displayObject.transform = transform;\n\n        return renderTexture;\n    }\n\n    destroy(): void\n    {\n        // ka boom!\n    }\n}\n\nextensions.add(GenerateTextureSystem);\n"],"mappings":";;;AAUA,MAAMA,aAAA,GAAgB,IAAIC,SAAU;AAsB7B,MAAMC,qBACb;EAcIC,YAAYC,QACZ;IACI,KAAKA,QAAW,GAAAA,QAAA;IAEX,KAAAC,WAAA,GAAc,IAAIC,MAAO;EAAA;EAUlCC,gBAAgBC,aAAA,EAAkCC,OAClD;IACI,MAAM;MAAEC,MAAA,EAAQC,YAAiB;MAAA,GAAAC;IAAA,IAAmBH,OAAA,IAAW,EAAC;IAEhE,MAAMC,MAAS,GAAAC,YAAA,IAAiBH,aAAuC,CAAAK,cAAA,CAAe,MAAM,IAAI;IAGhG,IAAIH,MAAA,CAAOI,KAAU,QAAGJ,MAAA,CAAOI,KAAQ;IACvC,IAAIJ,MAAA,CAAOK,MAAW,QAAGL,MAAA,CAAOK,MAAS;IAEnC,MAAAC,aAAA,GAAgBC,aAAA,CAAcC,MAChC;MACIJ,KAAA,EAAOJ,MAAO,CAAAI,KAAA;MACdC,MAAA,EAAQL,MAAO,CAAAK,MAAA;MACf,GAAGH;IAAA,CACN;IAEA,KAAAP,WAAA,CAAYc,EAAK,IAACT,MAAO,CAAAU,CAAA;IACzB,KAAAf,WAAA,CAAYgB,EAAK,IAACX,MAAO,CAAAY,CAAA;IAE9B,MAAMC,SAAA,GAAYf,aAAc,CAAAe,SAAA;IAEhCf,aAAA,CAAce,SAAY,GAAAvB,aAAA;IAErB,KAAAI,QAAA,CAASoB,MAAA,CAAOhB,aAAe;MAChCQ,aAAA;MACAO,SAAA,EAAW,IAAK,CAAAlB,WAAA;MAChBoB,mBAAA,EAAqB,CAAC,CAACjB,aAAc,CAAAkB,MAAA;MACrCC,IAAM;IAAA,CACT;IAEDnB,aAAA,CAAce,SAAY,GAAAA,SAAA;IAEnB,OAAAP,aAAA;EAAA;EAGXY,OACAA,CAAA;AAGJ;AArEa1B,qBAAA,CAGF2B,SAA+B;EAClCC,IAAM,GACFC,aAAc,CAAAC,cAAA,EACdD,aAAc,CAAAE,oBAAA,CAClB;EACAC,IAAM;AACV;AA8DJC,UAAA,CAAWC,GAAA,CAAIlC,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}